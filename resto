from tabulate import tabulate
from datetime import date
import random as rd
import matplotlib.pyplot as plt

#import matplotlib.pylot as plt
registry={}
pass_word='error_password'
while pass_word=='error_password':
    user_name=input("Username:" )
    pass_word=input("Password:")

    if pass_word=='bill' and user_name=='admin':   #change password here
        # print the header for the billing system
        print("\t\t\t\t\tBILLING SYSTEM")

        # get the name, address, and phone number of the restaurant
        hotel_name = "HOTEL KRISHNA VILASA"   #Please Enter your restaurant name b/w "_".
        address = "Kulur Ferry Rd, Urwa, Mangaluru, Karnataka 575006"#address
        phone = "9591241675"#phone number
        print("")
        # create a list of items and their corresponding prices
        items = [
            ['Tomato Soup', 23],
            ['Veg clear soup', 43],
            ['Vegetable Hot N Sour Soup', 34],
            ['Vegetable Manchow Soup', 34],
            ['Paneer Tikka', 45],
            ['Paneer Manchurian', 56],
            ['Veg Nuggets', 23],
            ['Mushroom Salt and Pepper', 45],
            ['Veg Salad', 567],
            ['Veg Pasta Salad', 567],
            ['Ham Burger and fries', 420],
            ['Chicken Nuggets',100],
            ['Chicks',1000],
            ['Steak', 250]
        ]

        print("Menu")
        print("-----------------")

        length=len(items)
        for i in range (length):
            print((i+1),"•",items[i][0],"\t₹",items[i][1])
        print("\n")
        # create a loop to process multiple bills
        loop_bill = 'next'
        count=0
        amt=0
        client=1
        gry=[]
        grx=[]
        while loop_bill == 'next':
            # initialize a list to store the items and their corresponding quantities and prices for the current bill
            bill_items = []
            kot_bill=[]
            total_cost = 0

            # create a loop to add items to the bill
            next_item = 'y'
            #To see the order number of the customer
            print("» Order number",client)
            gry.append(str(client))

            while next_item == 'y':    
                # get the order number and item details
               
                print()
                order_number = int(input("Enter the item no: "))
                item = items[order_number - 1][0]
                cost = items[order_number - 1][1]
               
                # ask the user for the quantity of the item
                quantity = int(input("Enter the quantity: "))

                # add the item, quantity, and cost to the bill
                bill_items.append([item, quantity, cost])

                #adding item and qty. to KOT bill
                kot_bill.append([item,quantity])

                # add the cost of the item to the total cost
                total_cost += cost * quantity
               
                # ask the user if they want to add more items
                next_item = input("More Items? [y/n] ")

            # print the bill
            print(40*'*')
            print("\n" + hotel_name)
            print(address)
            print("Phone: " + phone)
            print(date.today())
            print("Bill No.: " + str(rd.randint(1000, 9999)))
            print(tabulate(bill_items, headers=["Item", "Quantity", "Cost"], tablefmt='rounded_outline'))
            print("Total Cost: ₹" + str(total_cost))
            count+=1
            client+=1
            grx.append(total_cost)
            amt+=total_cost
            print(60*'*')
            # ask the user if they want to process another bill

#Kitchen purpose bill KOT
            print(60*'*')
            print("\n" + hotel_name)
            print(address)
            print(date.today())
            print(tabulate(kot_bill, headers=["Item", "Quantity"],tablefmt='rounded_outline'))
            # ask the user if they want to process another bill
            loop_bill = input("\nNext Bill? [next/done] ")
            print()
           
        print("\n\n")
        print("The number of orders taken today is",count)
        print("The total revenue today is ₹",amt)
        plt.bar(gry, grx)

            # Add a title and label the axes
        plt.title('Earnings today')
        plt.ylabel('Collected amount')
        plt.xlabel('Order number')

        # Show the plot
        plt.show()
    else:
        print("Wrong Username or Password\nPlease Retry!")
        pass_word='error_password'
